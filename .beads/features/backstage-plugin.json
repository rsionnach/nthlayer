{
  "id": "backstage-plugin",
  "type": "feature",
  "title": "NthLayer Backstage Plugin - Reliability Intelligence in Developer Portal",
  "description": "Backstage plugin that surfaces NthLayer reliability intelligence directly in the developer portal where teams naturally work. Includes entity cards, dependency graphs, and portfolio views.",
  "status": "open",
  "priority": "P2",
  "tags": ["feature", "backstage", "plugin", "ui", "integration"],
  "created_at": "2026-01-14T00:00:00Z",
  "specification_file": "BACKSTAGE_PLUGIN_SPEC.md",
  "target_release": "v0.6.0",
  "estimated_effort": "3-5 days",
  "depends_on": ["mcp-server", "dependency-discovery"],
  "specification_summary": {
    "total_lines": 2383,
    "sections": [
      "Plugin Architecture (frontend + backend)",
      "Backend Plugin (@nthlayer/backstage-plugin-backend)",
      "Frontend Plugin (@nthlayer/backstage-plugin)",
      "Component Library",
      "Integration Points"
    ]
  },
  "key_features": [
    {
      "name": "Backend Plugin",
      "description": "Express router with REST endpoints using new backend system (createBackendPlugin)",
      "endpoints": ["/drift/:service", "/deps/:service", "/ownership/:service", "/validate-slo/:service", "/blast-radius/:service", "/portfolio", "/graph"]
    },
    {
      "name": "Frontend Components",
      "components": [
        "EntityReliabilityCard - Service page overview card",
        "DependencyGraph - Interactive Cytoscape.js visualization",
        "DriftIndicator - Trend indicators with tooltips",
        "BlastRadiusCard - Impact analysis card",
        "PortfolioPage - Full-page portfolio view"
      ]
    },
    {
      "name": "NthLayerClient",
      "description": "Supports both CLI and API modes for flexibility",
      "modes": ["cli (invoke nthlayer CLI)", "api (call HTTP API)"]
    },
    {
      "name": "React Hooks",
      "hooks": ["useDrift", "useDependencies", "useOwnership", "usePortfolio"]
    }
  ],
  "implementation_phases": [
    {
      "phase": 1,
      "name": "Backend Plugin",
      "tasks": ["Scaffold with yarn new --select backend-plugin", "Implement NthLayerClient", "Create Express router", "Add auth policies"]
    },
    {
      "phase": 2,
      "name": "Frontend Plugin",
      "tasks": ["Scaffold with yarn new --select frontend-plugin", "Implement API client", "Build EntityReliabilityCard", "Build DriftIndicator"]
    },
    {
      "phase": 3,
      "name": "Advanced Components",
      "tasks": ["DependencyGraph with Cytoscape.js", "PortfolioPage with table and filters", "BlastRadiusCard"]
    },
    {
      "phase": 4,
      "name": "Integration",
      "tasks": ["Entity page integration", "Sidebar navigation", "Documentation"]
    }
  ],
  "acceptance_criteria": [
    "EntityReliabilityCard shows drift, budget, SLO feasibility for entity",
    "DependencyGraph renders interactive service graph",
    "PortfolioPage shows org-wide reliability overview",
    "Plugin works in both CLI and API modes",
    "Proper error handling when NthLayer unavailable"
  ],
  "references": [
    "https://backstage.io/docs",
    "https://backstage.io/docs/plugins/create-a-plugin"
  ]
}
