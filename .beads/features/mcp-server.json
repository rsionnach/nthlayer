{
  "id": "mcp-server",
  "type": "feature",
  "title": "NthLayer MCP Server - AI-Powered SRE Advisor",
  "description": "Model Context Protocol server that transforms NthLayer from a CLI tool into an AI-powered SRE advisor. Enables LLMs to access reliability intelligence through tools, resources, and prompts.",
  "status": "open",
  "priority": "P2",
  "tags": ["feature", "mcp", "ai", "llm", "integration"],
  "created_at": "2026-01-14T00:00:00Z",
  "specification_file": "MCP_SERVER_SPEC.md",
  "target_release": "v0.5.0",
  "estimated_effort": "2-3 days",
  "depends_on": ["dependency-discovery"],
  "specification_summary": {
    "total_lines": 1560,
    "sections": [
      "Architecture",
      "Tools (7)",
      "Resources (4)",
      "Prompts (5)",
      "CLI Integration",
      "Claude Desktop Integration"
    ]
  },
  "key_features": [
    {
      "name": "MCP Tools",
      "description": "Functions AI can call",
      "tools": [
        "nthlayer_drift_check - Check error budget drift",
        "nthlayer_validate_slo - Validate SLO feasibility",
        "nthlayer_blast_radius - Analyze degradation impact",
        "nthlayer_get_dependencies - Get service dependencies",
        "nthlayer_get_ownership - Get ownership info",
        "nthlayer_portfolio_status - Org-wide reliability view",
        "nthlayer_check_deploy - Pre-deployment validation"
      ]
    },
    {
      "name": "MCP Resources",
      "description": "Data AI can read",
      "resources": [
        "nthlayer://portfolio - Service portfolio",
        "nthlayer://service/{name} - Service details",
        "nthlayer://graph - Dependency graph",
        "nthlayer://config - Current configuration"
      ]
    },
    {
      "name": "MCP Prompts",
      "description": "Pre-defined templates for common workflows",
      "prompts": [
        "incident_response - Incident investigation workflow",
        "pre_deploy_review - Deployment readiness check",
        "capacity_planning - Capacity analysis",
        "weekly_reliability_review - Weekly review generation",
        "slo_design - SLO design assistance"
      ]
    },
    {
      "name": "Transports",
      "transports": ["stdio (for Claude Desktop)", "SSE (for web clients)"]
    },
    {
      "name": "CLI Commands",
      "commands": [
        "nthlayer mcp serve - Start MCP server",
        "nthlayer mcp serve --transport sse --port 8080 - SSE mode",
        "nthlayer mcp config - Show Claude Desktop config"
      ]
    }
  ],
  "use_cases": [
    "Is payment-api healthy? -> AI checks drift, dependencies, ownership",
    "What's our reliability posture? -> AI queries portfolio",
    "Should we deploy this PR? -> AI validates SLO feasibility",
    "Who should I page? -> AI returns ownership + blast radius"
  ],
  "dependencies": {
    "required": ["mcp>=1.0.0", "httpx>=0.25.0"],
    "mcp_sdk": "https://github.com/modelcontextprotocol/python-sdk"
  },
  "acceptance_criteria": [
    "MCP server starts and responds to tool calls",
    "All 7 tools return correct JSON output",
    "Resources return current data",
    "Prompts generate useful workflow templates",
    "Works with Claude Desktop"
  ]
}
