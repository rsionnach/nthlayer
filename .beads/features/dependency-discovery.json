{
  "id": "dependency-discovery",
  "type": "feature",
  "title": "Dependency Discovery Engine with Identity Resolution",
  "description": "Automatic dependency discovery from existing systems (Consul, Backstage, Prometheus, Kubernetes) with identity resolution to normalize service names across different systems.",
  "status": "open",
  "priority": "P1",
  "tags": ["feature", "dependencies", "identity", "discovery", "providers"],
  "created_at": "2026-01-14T00:00:00Z",
  "specification_file": "DEPENDENCY_DISCOVERY_SPEC.md",
  "target_release": "v0.3.0",
  "depends_on": ["drift-detection"],
  "specification_summary": {
    "total_lines": "~1500+",
    "sections": [
      "Identity Resolution",
      "Dependency Providers",
      "Ownership Attribution",
      "CLI Commands",
      "Graph Building"
    ]
  },
  "key_features": [
    {
      "name": "Identity Resolver",
      "description": "Normalizes service names across different systems",
      "examples": {
        "kubernetes": "payment-api, payments/payment-api",
        "consul": "payment-api-prod, dc1.payment-api",
        "backstage": "component:default/payment-api",
        "prometheus": "job=payment-api, service=payments"
      }
    },
    {
      "name": "Discovery Providers",
      "providers": [
        "Consul - HashiCorp service discovery",
        "ZooKeeper - Apache coordination",
        "Eureka - Netflix service registry",
        "etcd - Distributed key-value",
        "Kubernetes - K8s API discovery",
        "Backstage - Developer portal catalog",
        "Cortex.io - Developer portal",
        "Prometheus - Metrics-based discovery",
        "AWS Cloud Map - AWS service discovery",
        "Tracing (Tempo/Jaeger) - Trace-based discovery"
      ]
    },
    {
      "name": "Ownership Attribution",
      "sources": [
        "service.yaml (explicit, confidence: 1.0)",
        "PagerDuty (confidence: 0.95)",
        "OpsGenie (confidence: 0.9)",
        "Developer portal (confidence: 0.9)",
        "CODEOWNERS (confidence: 0.85)",
        "Cloud tags (confidence: 0.8)",
        "Kubernetes labels (confidence: 0.75)"
      ]
    },
    {
      "name": "CLI Commands",
      "commands": [
        "nthlayer deps <service> - Show dependencies",
        "nthlayer identity resolve <name> - Resolve identity",
        "nthlayer ownership <service> - Show ownership",
        "nthlayer validate-slo <service> - Validate SLO feasibility",
        "nthlayer blast-radius <service> - Analyze impact"
      ]
    }
  ],
  "module_structure": [
    "src/nthlayer/identity/ - Identity resolution package",
    "src/nthlayer/dependencies/ - Dependency discovery package",
    "src/nthlayer/dependencies/providers/ - Provider implementations"
  ],
  "optional_dependencies": [
    "discovery-consul (python-consul2)",
    "discovery-zookeeper (kazoo)",
    "discovery-eureka (py-eureka-client)",
    "discovery-kubernetes (kubernetes)",
    "discovery-aws (boto3)",
    "ownership-pagerduty (pdpyras)",
    "ownership-slack (slack-sdk)"
  ],
  "acceptance_criteria": [
    "Identity resolver correctly normalizes names from different sources",
    "Dependency graph built from multiple providers",
    "Ownership attributed with confidence scores",
    "validate-slo calculates serial availability correctly",
    "blast-radius shows downstream impact analysis"
  ]
}
