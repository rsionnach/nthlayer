{
  "id": "chunkhound-audit-tier-system-single-source-of-truth",
  "type": "epic",
  "title": "[ChunkHound Audit] Tier System Single Source of Truth",
  "description": "Consolidate tier definition, validation, and semantics into single module.\n\n**Source:** docs/audits/chunkhound/runs/2026-01-02/02-tier.md\n\n**Key Findings:**\n1. SLO conflict: concepts/slos.md says standard=99.5%, reference/service-yaml.md says standard=99.9%\n2. Format acceptance conflict: docs show tier:1 valid but conftest.py rejects numeric '1', '2', '3'\n3. Severity adjustment logic incomplete in loki/generator.py (missing standard/low cases)\n4. Notification tier naming mismatch: TIER_1/2/3 vs critical/standard/low\n5. 8 different tier decision points across codebase\n6. Invalid tier produces WARNING (not ERROR) in validation\n\n**Proposed Solution:**\nCreate `src/nthlayer/core/tier.py`:\n- TierLevel enum (CRITICAL, STANDARD, LOW)\n- TierSpec dataclass with ALL decision values:\n  - availability_slo, latency_p99_ms, error_rate_pct\n  - error_budget_min, deploy_gate_budget_pct\n  - error_alert_threshold_pct, latency_alert_threshold_ms\n  - alert_base_severity, pagerduty_urgency\n- normalize_tier() function for unified format handling\n- get_tier_spec() function for SLO lookup\n\n**Changes Required:**\n1. Update conftest.py to use normalize_tier(), ERROR on invalid\n2. Update generator.py to use get_tier_spec() + severity mapping\n3. Deprecate fragmented docs, generate from tier.py",
  "status": "open",
  "priority": "P2",
  "tags": [],
  "created_at": "2026-01-03T21:00:00Z",
  "updated_at": "2026-01-03T21:00:00Z",
  "legacy_id": "trellis-audit-tier",
  "comments": [
    {
      "author": "chunkhound-audit",
      "text": "Source: 02-tier.md - Tier Definition, Validation, and Usage",
      "date": "2026-01-03T21:23:27Z"
    }
  ]
}
